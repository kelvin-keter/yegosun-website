{% extends "base.html" %}
{% block title %}Our Projects{% endblock %}

{% block content %}
<div class="position-relative py-5" style="background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('{{ url_for('static', filename='images/hero-3.jpg') }}'); background-size: cover; background-position: center; padding-bottom: 6rem !important;">
    <div class="container py-5 text-center text-white">
        <h6 class="text-warning fw-bold text-uppercase tracking-wide mb-2">Our Portfolio</h6>
        <h1 class="display-4 fw-extrabold mb-3">Engineering Excellence</h1>
        <p class="lead text-white-50 mx-auto" style="max-width: 700px;">Explore our track record of delivering reliable solar infrastructure across East Africa.</p>
    </div>
</div>

<div class="container" style="margin-top: -40px; position: relative; z-index: 10;">
    <div class="bg-white p-4 shadow rounded-4 text-center">
        <div class="d-flex flex-wrap justify-content-center gap-3" id="portfolio-flters">
            <button class="btn btn-outline-dark rounded-pill px-4 fw-bold active" onclick="filterProjects('all', this)">All Projects</button>
            <button class="btn btn-outline-dark rounded-pill px-4 fw-bold" onclick="filterProjects('residential', this)">Residential</button>
            <button class="btn btn-outline-dark rounded-pill px-4 fw-bold" onclick="filterProjects('commercial', this)">Commercial</button>
            <button class="btn btn-outline-dark rounded-pill px-4 fw-bold" onclick="filterProjects('education', this)">Education</button>
            <button class="btn btn-outline-dark rounded-pill px-4 fw-bold" onclick="filterProjects('community', this)">Community</button>
        </div>
    </div>
</div>

<section class="py-5 bg-light">
    <div class="container">
        <div class="row g-4" id="project-grid">
            
            {% for project in projects %}
            <div class="col-md-4 project-item {{ project.category|lower }}">
                <div class="card h-100 border-0 shadow-sm hover-up">
                    <div class="position-relative overflow-hidden">
                        <img src="{{ project.image_url }}" class="card-img-top" alt="{{ project.title }}" style="height: 250px; object-fit: cover;">
                        <span class="badge bg-dark position-absolute top-0 end-0 m-3">{{ project.category }}</span>
                    </div>
                    <div class="card-body p-4">
                        <small class="text-muted fw-bold text-uppercase">{{ project.location }}</small>
                        <h5 class="fw-bold mt-1 mb-3">{{ project.title }}</h5>
                        <p class="text-muted small mb-3">{{ project.description[:100] }}...</p>
                        
                        {% if project.impact %}
                        <div class="mb-3">
                            <span class="badge bg-light text-success border border-success px-3 py-2 rounded-pill fw-bold">
                                <i class="fa-solid fa-arrow-trend-up me-2"></i> {{ project.impact }}
                            </span>
                        </div>
                        {% endif %}
                        
                        <div class="d-flex justify-content-between border-top pt-3">
                            <span class="text-dark fw-bold small"><i class="fa-solid fa-bolt text-warning me-1"></i> {{ project.system_size }}</span>
                            
                            {% if project.status == 'Ongoing' %}
                                <span class="text-warning fw-bold small"><i class="fa-solid fa-spinner fa-spin me-1"></i> Ongoing</span>
                            {% else %}
                                <span class="text-dark fw-bold small"><i class="fa-solid fa-circle-check text-success me-1"></i> Completed</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}

            <div class="col-md-4 project-item education">
                <div class="card h-100 border-0 shadow-sm hover-up">
                    <div class="position-relative overflow-hidden">
                        <img src="{{ url_for('static', filename='images/hero-1.jpg') }}" class="card-img-top" alt="School Project" style="height: 250px; object-fit: cover;">
                        <span class="badge bg-warning text-dark position-absolute top-0 end-0 m-3">Education</span>
                    </div>
                    <div class="card-body p-4">
                        <small class="text-muted fw-bold text-uppercase">Nairobi Metro</small>
                        <h5 class="fw-bold mt-1 mb-3">National High School</h5>
                        <p class="text-muted small mb-3">Full campus grid-tie integration powering computer labs and admin blocks.</p>
                        <div class="mb-3">
                            <span class="badge bg-light text-success border border-success px-3 py-2 rounded-pill fw-bold">
                                <i class="fa-solid fa-arrow-down me-2"></i> 60% Bill Reduction
                            </span>
                        </div>
                        <div class="d-flex justify-content-between border-top pt-3">
                            <span class="text-dark fw-bold small"><i class="fa-solid fa-bolt text-warning me-1"></i> 50kWp</span>
                            <span class="text-dark fw-bold small"><i class="fa-solid fa-circle-check text-success me-1"></i> Completed</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4 project-item commercial">
                <div class="card h-100 border-0 shadow-sm hover-up">
                    <div class="position-relative overflow-hidden">
                        <img src="{{ url_for('static', filename='images/project-industry.jpg') }}" class="card-img-top" alt="Industry Project" style="height: 250px; object-fit: cover;">
                        <span class="badge bg-success text-white position-absolute top-0 end-0 m-3">Commercial</span>
                    </div>
                    <div class="card-body p-4">
                        <small class="text-muted fw-bold text-uppercase">Industrial Zone</small>
                        <h5 class="fw-bold mt-1 mb-3">Manufacturing Plant</h5>
                        <p class="text-muted small mb-3">Hybrid system with battery storage for heavy machinery and backup.</p>
                        <div class="mb-3">
                            <span class="badge bg-light text-dark border px-3 py-2 rounded-pill fw-bold">
                                <i class="fa-solid fa-shield-halved me-2"></i> Zero Downtime
                            </span>
                        </div>
                        <div class="d-flex justify-content-between border-top pt-3">
                            <span class="text-dark fw-bold small"><i class="fa-solid fa-bolt text-warning me-1"></i> 100kWp</span>
                            <span class="text-dark fw-bold small"><i class="fa-solid fa-circle-check text-success me-1"></i> Completed</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4 project-item community">
                <div class="card h-100 border-0 shadow-sm hover-up">
                    <div class="position-relative overflow-hidden">
                        <img src="{{ url_for('static', filename='images/project-water.jpg') }}" class="card-img-top" alt="Water Project" style="height: 250px; object-fit: cover;">
                        <span class="badge bg-primary text-white position-absolute top-0 end-0 m-3">Community</span>
                    </div>
                    <div class="card-body p-4">
                        <small class="text-muted fw-bold text-uppercase">Rural County</small>
                        <h5 class="fw-bold mt-1 mb-3">Community Water Project</h5>
                        <p class="text-muted small mb-3">Solar water pumping system serving 500+ households daily.</p>
                        <div class="mb-3">
                            <span class="badge bg-light text-success border border-success px-3 py-2 rounded-pill fw-bold">
                                <i class="fa-solid fa-leaf me-2"></i> 100% Renewable
                            </span>
                        </div>
                        <div class="d-flex justify-content-between border-top pt-3">
                            <span class="text-dark fw-bold small"><i class="fa-solid fa-bolt text-warning me-1"></i> 50k Liters/Day</span>
                            <span class="text-dark fw-bold small"><i class="fa-solid fa-circle-check text-success me-1"></i> Completed</span>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>

<section class="py-5 bg-dark text-white text-center">
    <div class="container">
        <h2 class="fw-extrabold mb-3">Ready to Start Your Project?</h2>
        <p class="lead text-white-50 mb-4">From design to commissioning, we handle it all.</p>
        <a href="{{ url_for('contact') }}" class="btn btn-warning btn-lg px-5 fw-bold rounded-pill">Request a Proposal</a>
    </div>
</section>

<script>
    function filterProjects(category, btnElement) {
        let buttons = document.querySelectorAll('#portfolio-flters button');
        buttons.forEach(btn => {
            btn.classList.remove('active');
            btn.classList.remove('btn-dark');
            btn.classList.add('btn-outline-dark');
        });
        
        btnElement.classList.add('active');
        btnElement.classList.remove('btn-outline-dark');
        btnElement.classList.add('btn-dark');

        let items = document.querySelectorAll('.project-item');
        
        items.forEach(item => {
            if (category === 'all' || item.classList.contains(category)) {
                item.style.display = 'block';
                item.classList.add('animate-fade-in');
            } else {
                item.style.display = 'none';
                item.classList.remove('animate-fade-in');
            }
        });
    }
</script>

<style>
    .animate-fade-in { animation: fadeIn 0.5s ease-in; }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .hover-up { transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .hover-up:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important; }
</style>
{% endblock %}